BigBank - Loan Calculator - Automated Test Suite
================================
This project holds the test suites and scripts for the Assessment task provided by Bigbank.

Technical Setup
---------------
1. Clone the repo in your system.
2. Install Docker. (click here for official guide)[https://docs.docker.com/engine/install/ubuntu/]

Tests Execution
---------------
1. After installing docker, navigate to the main dir: **bigbank/**
2. Run the following command: 
   -  `docker-compose build` -  This will build 4 docker images for the test suites - API, UI, and Allure Reports. All dependencies will be installed automatically.
3. Next, Run the following command to spin up the images:
   - `docker-compose up` - This will start all the four containers.
4. Wait for a couple of minutes for the tests to finish.
5. Lastly, open the following link in your local browser:
    - [Allure Test Reports](http://localhost:5050/allure-docker-service/projects/default/reports/latest/index.html?redirect=false)

Project Structure
-----------------
### `./apitests`
This folder contains the source code of the API tests.
- `/tests` - This is the main tests src repository for api test scripts
  - `conftest.py` - Pytest config file for custom fixtures
- `./loan_calc_schema` - Includes the files consisting of valid JSON schema to validate the API responses
- `api_utils.py` - The Utils file having all the helper functions to modularize code
- `Dockerfile` - The Dockerfile to bring everything together aka create a docker image!

### `./ui_tests`
This folder contains the source code of the UI tests.
- `./pom` - The Page Object Model dir
  - `home_page.py` - Python file for the CalcPage() class - which will be instantiated in tests and have all the necessary functions and modules
  - `locators.py` - A simple config file to reference page locators in form of XPath.
- `./tests`
  - `conftest.py` - Pytest config file for custom fixtures
- `Dockerfile` - The Dockerfile to bring everything together aka create a docker image!

### `./logs`
This directory will be autogenerated on tests execution and is not a part of main repo.

### `./allure-results`
This directory will be autogenerated on tests execution and is not a part of main repo.

### `./allure-reports`
This directory will be autogenerated on tests execution and is not a part of main repo.

- `config.json` - Configuration file for the test suite(s).
- `base_script.py`- File with ConfigLoader() class to access test configuration from config.json
- `docker-compose.yml` - Docker Compose file - actually, the most imp you need in this whole repo to run tests :D 
- `logger.py` - Customized Logger for logging
- `pytest.ini` - Pytest configuration file having CLI arguments to execute tests
- `requirements.txt` - List of all necessary dependencies, just in case you need!

How Tests and Reports work - Explained!
---------------------------------------
Basically, all tests use **pytest** as the root framework and test runner. For the API tests, '**requests**' library package is used.
For the UI tests, '**Playwright**' is used. Both packages provide excellent support with Python and thus are the absolute choice!
Now, the tests are developed in a way that each file correspond to either one test case or test cases related to a single scenario at least. This makes the code 
readable and maintainable. Also, each script has its function definition as the test description to give an overview.

For the Reporting, **Allure Reports 2.0** are integrated using the docker images provided by Frank Escobar. This way, the Allure reporting
mechanism is not required to be installed separately on the machine and also, requires a very minimal setup.
More details for these can be found here: [allure-docker-service-ui](https://github.com/fescobar/allure-docker-service-ui)

In a nutshell, whenever the Docker-Compose files are build, this pulls the **Allure** docker images from dockerhub, and then builds 2 images
for both API and UI tests, namely 'api-tests-1' and 'ui-tests-1'. 
When you run the command, `docker-compose up`, this creates containers from those images and starts execution. The Allure containers constantly 
wait for the results to be generated and check after every second to update the results to the local host server.

Finally, when the API and UI tests container finishes up the execution, they're stopped. However, the Allure containers keep on running and therefore, need manual interruption.

### References:
- https://pytest-html.readthedocs.io/en/latest/
- https://playwright.dev/python/
- https://requests.readthedocs.io/en/latest/
- https://docs.docker.com/reference/
- https://github.com/fescobar/allure-docker-service-ui
- https://web-loan-application-test.bigbank.se/?amount=85000&period=120&interestRate=10.95&lang=sv&bbsource=google&bbchannel=organic

### Contact: 
In case of any issues, please feel free to contact me at: saadtahir96@outlook.com